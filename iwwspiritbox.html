<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
<title>Headstone Check</title>
<style>
  :root{
    --ink:#f0f4ff; --muted:#c9d1e8; --accent:#7df3ff; --error:#ff7a7a;
    --card-bg: rgba(8,12,18,.65);
  }
  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    background:#000 url("iwwcamerabackground.png") center / cover fixed no-repeat;
    display:flex; align-items:center; justify-content:center;
    padding:24px;
  }
  .card{
    width:100%;
    max-width:700px;
    background:var(--card-bg);
    border:1px solid rgba(255,255,255,.08);
    border-radius:16px;
    backdrop-filter: blur(3px) saturate(120%);
    box-shadow:0 20px 60px rgba(0,0,0,.6);
    padding:20px 18px;
  }
  .kristina{
    font-size: clamp(18px, 4.5vw, 22px);
    line-height: 1.35;
    margin:0 0 14px 0;
  }
  form{
    display:flex; gap:10px; align-items:stretch; width:100%;
  }
  input[type="text"]{
    flex:1;
    font-size: clamp(16px, 5vw, 18px);
    padding:14px 14px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.15);
    background:rgba(10,16,24,.75);
    color:var(--ink);
    outline:none;
  }
  input[type="text"]::placeholder{ color:rgba(255,255,255,.45); }
  button{
    font-size: clamp(16px, 4.8vw, 18px);
    padding:14px 18px;
    border-radius:12px;
    border:1px solid rgba(125,243,255,.35);
    background:rgba(25,35,48,.85);
    color:var(--ink);
    white-space:nowrap;
  }
  .error{
    margin-top:10px; color:var(--error);
    font-size: clamp(14px, 3.8vw, 16px);
    min-height:1.2em;
  }
  .player{
    margin-top:14px;
    display:none; /* shown after correct answer */
  }
  audio{
    width:100%;
    display:block;
  }
  .sr-only{
    position:absolute !important; height:1px; width:1px; overflow:hidden;
    clip:rect(1px,1px,1px,1px); white-space:nowrap;
  }
</style>
</head>
<body>
  <main class="card">
    <p id="prompt" class="kristina">Kristina: “What first name did you get from the headstone?”</p>

    <form id="nameForm" autocomplete="off" novalidate>
      <label class="sr-only" for="name">Enter the first name</label>
      <input id="name" type="text" inputmode="text" autocapitalize="none" autocomplete="off"
             placeholder="Type the first name…" required />
      <button type="submit">Submit</button>
    </form>

    <div id="error" class="error" role="status" aria-live="polite"></div>

    <!-- Audio player appears after correct answer -->
    <div class="player" id="playerWrap">
      <audio id="spiritAudio" preload="auto" controls>
        <source src="iww spiritbox audio.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </div>
  </main>

<script>
(() => {
  const form = document.getElementById('nameForm');
  const input = document.getElementById('name');
  const promptEl = document.getElementById('prompt');
  const errorEl = document.getElementById('error');
  const playerWrap = document.getElementById('playerWrap');
  const audio = document.getElementById('spiritAudio');

  const CORRECT = 'joseph'; // case-insensitive

  const normalize = s => (s || '').trim().toLowerCase();

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const guess = normalize(input.value);

    if (guess === CORRECT){
      errorEl.textContent = '';
      // Replace prompt text
      promptEl.textContent = 'Kristina: Great job! Alright, lets give the spirit box a shot. Joseph if you are here, talk to us.';
      // Hide the form
      form.style.display = 'none';
      // Reveal player and attempt to autoplay once (user gesture present)
      playerWrap.style.display = 'block';
      try { await audio.play(); } catch(_) { /* user can tap play */ }
    } else {
      errorEl.textContent = "hmm, that doesn't look right. Take another look at the headstone.";
      // subtle shake
      form.animate(
        [{ transform:'translateX(0)' },{ transform:'translateX(-6px)' },{ transform:'translateX(6px)' },{ transform:'translateX(0)' }],
        { duration: 220, easing:'ease-in-out' }
      );
      input.focus();
      input.select();
    }
  });

  // Let users press Enter on mobile keyboards
  input.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ e.preventDefault(); form.requestSubmit(); }
  });
})();
</script>
</body>
</html>
